<template>
    <div class="absolute z-20 overflow-hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700">
        <ul class="text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownDefaultButton">
            <li @click="$emit('show-new-task-modal')"
                class="block hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
                <div class="p-2 flex justify-start items-center">
                    <PlusIcon class="w-[1.15rem] h-[1.15rem]"></PlusIcon>
                    <span class="ms-2">Add subtask</span>
                </div>
            </li>
            <li v-if="isNotProject" @click="$emit('duplicate-once')"
                class="block hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
                <div class="p-2 flex justify-start items-center">
                    <DocumentDuplicateIcon class="w-[1.15rem] h-[1.15rem]"></DocumentDuplicateIcon>
                    <span class="ms-2">Duplicate once</span>
                </div>
            </li>
            <li v-if="isNotProject" @click="$emit('duplicate-n-times')"
                class="block hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
                <div class="p-2 flex justify-start items-center">
                    <CircleStackIcon class="w-[1.15rem] h-[1.15rem]"></CircleStackIcon>
                    <span class="ms-2">Duplicate n times</span>
                </div>
            </li>
            <li @click="$emit('edit-task')" class="block hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
                <div class="p-2 flex justify-start items-center">
                    <PencilSquareIcon class="w-[1.15rem] h-[1.15rem]"></PencilSquareIcon>
                    <span class="ms-2">Edit</span>
                </div>
            </li>
            <hr v-if="!isNewProject">
            <li v-if="!isNewProject" @click="$emit('export-task-to-calendar')"
                class="block hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
                <div class="p-2 flex justify-start items-center">
                    <CalendarDaysIcon class="w-[1.15rem] h-[1.15rem]"></CalendarDaysIcon>
                    <span class="ms-2"> Export to Calendar </span>
                </div>
            </li>
            <li v-if="!isNewProject" @click="$emit('export-task-to-inbox')"
                class="block hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
                <div class="p-2 flex justify-start items-center">
                    <InboxArrowDownIcon class="w-[1.15rem] h-[1.15rem]"></InboxArrowDownIcon>
                    <span class="ms-2"> Export to inbox</span>
                </div>
            </li>
            <hr>
            <li @click="$emit('delete-task')" class="block text-red-500 hover:bg-gray-100 dark:hover:bg-gray-600">
                <div class="p-2 flex justify-start items-center">
                    <TrashIcon class="w-[1.15rem] h-[1.15rem]"></TrashIcon>
                    <span class="ms-2">Delete</span>
                </div>
            </li>
            <li @click="$emit('delete-subtasks')" class="block text-red-500 hover:bg-gray-100 dark:hover:bg-gray-600">
                <div class="p-2 flex justify-start items-center">
                    <!-- <PencilSquareIcon class="w-[1.15rem] h-[1.15rem]"></PencilSquareIcon> -->
                    <span class="text-red-500 w-[1.15rem] h-[1.15rem]">
                        <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 1024 1024"
                            viewBox="0 0 1024 1024" class="text-red-500">
                            <path
                                d="M603.3 344.1c-24.6 0-49.3 0-73.9 0-33.5 0-67 0-100.5 0-2.7 0-5.3 0-8 0-1 0-1.9-.1-2.9-.1 2.9.2-.9-.3-1.9-.5-.4-.1-3.1-1-1.3-.3 1.7.6-1.7-.9-1.7-.9-.6-.4-3.9-2.6-2.8-1.7 1.3 1.1-.3-.3-.5-.5-.5-.6-1.2-1.3-1.8-1.8-.4-.4-1.7-2.2-.1.1-.4-.5-.8-1.1-1.1-1.6-.4-.7-.9-1.5-1.3-2.2-.4-.7-1.1-3.3-.3-.6-.5-1.5-.9-2.9-1.2-4.5-.4-1.7.1.4.1.7 0-.9-.1-1.8-.1-2.7 0-.2 0-.3 0-.5 0-1 0-2 0-3 0-4.7 0-9.4 0-14.1 0-36 0-72 0-108 0-15.2 0-30.3 0-45.5 0-3.5 0-7 0-10.4 0-.3 0-.6 0-.9 0-.6.2-3.8 0-2.3-.2 1.5.7-2.5.8-3.2.5-2.5.2-.9-.1-.1.3-.6.5-1.2.9-1.7.7-1.3 1.5-2.6 2.4-3.8-1.7 2.4 1.8-1.6 2.4-2.2 1.2-1.1-.3.2-.5.3.7-.5 1.4-1 2.2-1.4.7-.4 1.5-.8 2.3-1.2.2-.1 2.2-.9.6-.3-1.4.5 2.5-.6 3.2-.8 2.7-.8.7-.1 0-.1.9-.1 1.8-.1 2.7-.1.6 0 1.1 0 1.7 0 3.8 0 7.6 0 11.5 0 15.6 0 31.2 0 46.7 0 35.7 0 71.3 0 107 0 4.3 0 8.6 0 13 0 .9 0 1.7 0 2.6 0 .6 0 4.1.2 2.3 0-1.3-.1 2.4.7 3.2.8.5.1 2.8 1 .1-.1.8.3 1.6.7 2.3 1.2.7.4 4.5 3.3 2.3 1.3 1.1 1 2.2 2 3.2 3.1 1.1 1.2-.2-.3-.3-.5.5.7 1 1.4 1.4 2.2.6.9 2.1 5 1.3 2.3.5 1.5.9 3 1.2 4.5.5 2.2.1-2.3 0 0 0 .7.1 1.4.1 2.1 0 .2 0 .3 0 .5 0 3 0 6.1 0 9.1 0 34 0 68.1 0 102.1 0 16.8 0 33.7 0 50.5 0 5.1 0 10.3 0 15.4 0 1.3 0 2.6 0 3.9 0 1.3-.4 5.2.1 2.5-.3 1.5-.7 3-1.1 4.5-.5 1.6.2-.3.3-.5-.3.8-.7 1.6-1.2 2.3-.4.8-.9 1.5-1.3 2.2-.1.2-1.4 1.9-.4.6.9-1.1-1.8 1.8-2.3 2.3-1.8 1.9-.6.5.1.1-.7.5-1.4 1-2.2 1.4-.6.4-4.2 2-2.9 1.5 1.2-.5-2.4.6-3.2.8-.7.2-2.8.3 0 .1C605.1 344 604.2 344.1 603.3 344.1c-7.8.2-15.4 6.8-15 15 .4 8 6.6 15.2 15 15 27.2-.6 46.8-22.4 46.8-49 0-11.8 0-23.6 0-35.3 0-38.6 0-77.1 0-115.7 0-9.6.1-19.3 0-28.9-.4-26.3-21.2-47-47.6-47.2-29.5-.2-59 0-88.5 0-30.6 0-61.1-.1-91.7 0-26.4.1-47.9 20.1-48.4 46.8-.1 8.6 0 17.3 0 25.9 0 38.3 0 76.6 0 114.8 0 12.7 0 25.4 0 38.2 0 5.9.3 11.9 2.1 17.5 5.1 16 19.1 29.3 35.9 32 9.7 1.6 19.7.9 29.5.9 17.7 0 35.4 0 53.2 0 34.2 0 68.4 0 102.6 0 2 0 4.1 0 6.1 0 7.8 0 15.4-6.9 15-15C617.9 351 611.7 344.1 603.3 344.1zM603.3 896.1c-24.6 0-49.3 0-73.9 0-33.5 0-67 0-100.5 0-2.7 0-5.3 0-8 0-1 0-1.9-.1-2.9-.1 2.9.2-.9-.3-1.9-.5-.4-.1-3.1-1-1.3-.3 1.7.6-1.7-.9-1.7-.9-.6-.4-3.9-2.6-2.8-1.7 1.3 1.1-.3-.3-.5-.5-.5-.6-1.2-1.3-1.8-1.8-.4-.4-1.7-2.2-.1.1-.4-.5-.8-1.1-1.1-1.6-.4-.7-.9-1.5-1.3-2.2-.4-.7-1.1-3.3-.3-.6-.5-1.5-.9-2.9-1.2-4.5-.4-1.7.1.4.1.7 0-.9-.1-1.8-.1-2.7 0-.2 0-.3 0-.5 0-1 0-2 0-3 0-4.7 0-9.4 0-14.1 0-36 0-72 0-108 0-15.2 0-30.3 0-45.5 0-3.5 0-7 0-10.4 0-.3 0-.6 0-.9 0-.6.2-3.8 0-2.3-.2 1.5.7-2.5.8-3.2.5-2.5.2-.9-.1-.1.3-.6.5-1.2.9-1.7.7-1.3 1.5-2.6 2.4-3.8-1.7 2.4 1.8-1.6 2.4-2.2 1.2-1.1-.3.2-.5.3.7-.5 1.4-1 2.2-1.4.7-.4 1.5-.8 2.3-1.2.2-.1 2.2-.9.6-.3-1.4.5 2.5-.6 3.2-.8 2.7-.8.7-.1 0-.1.9-.1 1.8-.1 2.7-.1.6 0 1.1 0 1.7 0 3.8 0 7.6 0 11.5 0 15.6 0 31.2 0 46.7 0 35.7 0 71.3 0 107 0 4.3 0 8.6 0 13 0 .9 0 1.7 0 2.6 0 .6 0 4.1.2 2.3 0-1.3-.1 2.4.7 3.2.8.5.1 2.8 1 .1-.1.8.3 1.6.7 2.3 1.2.7.4 4.5 3.3 2.3 1.3 1.1 1 2.2 2 3.2 3.1 1.1 1.2-.2-.3-.3-.5.5.7 1 1.4 1.4 2.2.6.9 2.1 5 1.3 2.3.5 1.5.9 3 1.2 4.5.5 2.2.1-2.3 0 0 0 .7.1 1.4.1 2.1 0 .2 0 .3 0 .5 0 3 0 6.1 0 9.1 0 34 0 68.1 0 102.1 0 16.8 0 33.7 0 50.5 0 5.1 0 10.3 0 15.4 0 1.3 0 2.6 0 3.9 0 1.3-.4 5.2.1 2.5-.3 1.5-.7 3-1.1 4.5-.5 1.6.2-.3.3-.5-.3.8-.7 1.6-1.2 2.3-.4.8-.9 1.5-1.3 2.2-.1.2-1.4 1.9-.4.6.9-1.1-1.8 1.8-2.3 2.3-1.8 1.9-.6.5.1.1-.7.5-1.4 1-2.2 1.4-.6.4-4.2 2-2.9 1.5 1.2-.5-2.4.6-3.2.8-.7.2-2.8.3 0 .1C605.1 896 604.2 896.1 603.3 896.1c-7.8.2-15.4 6.8-15 15 .4 8 6.6 15.2 15 15 27.2-.6 46.8-22.4 46.8-49 0-11.8 0-23.6 0-35.3 0-38.6 0-77.1 0-115.7 0-9.6.1-19.3 0-28.9-.4-26.3-21.2-47-47.6-47.2-29.5-.2-59 0-88.5 0-30.6 0-61.1-.1-91.7 0-26.4.1-47.9 20.1-48.4 46.8-.1 8.6 0 17.3 0 25.9 0 38.3 0 76.6 0 114.8 0 12.7 0 25.4 0 38.2 0 5.9.3 11.9 2.1 17.5 5.1 16 19.1 29.3 35.9 32 9.7 1.6 19.7.9 29.5.9 17.7 0 35.4 0 53.2 0 34.2 0 68.4 0 102.6 0 2 0 4.1 0 6.1 0 7.8 0 15.4-6.9 15-15C617.9 903 611.7 896.1 603.3 896.1zM254.4 896.1c-24.6 0-49.3 0-73.9 0-33.5 0-67 0-100.5 0-2.7 0-5.3 0-8 0-1 0-1.9-.1-2.9-.1 2.9.2-.9-.3-1.9-.5-.4-.1-3.1-1-1.3-.3 1.7.6-1.7-.9-1.7-.9-.6-.4-3.9-2.6-2.8-1.7 1.3 1.1-.3-.3-.5-.5-.5-.6-1.2-1.3-1.8-1.8-.4-.4-1.7-2.2-.1.1-.4-.5-.8-1.1-1.1-1.6-.4-.7-.9-1.5-1.3-2.2-.4-.7-1.1-3.3-.3-.6-.5-1.5-.9-2.9-1.2-4.5-.4-1.7.1.4.1.7 0-.9-.1-1.8-.1-2.7 0-.2 0-.3 0-.5 0-1 0-2 0-3 0-4.7 0-9.4 0-14.1 0-36 0-72 0-108 0-15.2 0-30.3 0-45.5 0-3.5 0-7 0-10.4 0-.3 0-.6 0-.9 0-.6.2-3.8 0-2.3-.2 1.5.7-2.5.8-3.2.5-2.5.2-.9-.1-.1.3-.6.5-1.2.9-1.7.7-1.3 1.5-2.6 2.4-3.8-1.7 2.4 1.8-1.6 2.4-2.2 1.2-1.1-.3.2-.5.3.7-.5 1.4-1 2.2-1.4.7-.4 1.5-.8 2.3-1.2.2-.1 2.2-.9.6-.3-1.4.5 2.5-.6 3.2-.8 2.7-.8.7-.1 0-.1.9-.1 1.8-.1 2.7-.1.6 0 1.1 0 1.7 0 3.8 0 7.6 0 11.5 0 15.6 0 31.2 0 46.7 0 35.7 0 71.3 0 107 0 4.3 0 8.6 0 13 0 .9 0 1.7 0 2.6 0 .6 0 4.1.2 2.3 0-1.3-.1 2.4.7 3.2.8.5.1 2.8 1 .1-.1.8.3 1.6.7 2.3 1.2.7.4 4.5 3.3 2.3 1.3 1.1 1 2.2 2 3.2 3.1 1.1 1.2-.2-.3-.3-.5.5.7 1 1.4 1.4 2.2.6.9 2.1 5 1.3 2.3.5 1.5.9 3 1.2 4.5.5 2.2.1-2.3 0 0 0 .7.1 1.4.1 2.1 0 .2 0 .3 0 .5 0 3 0 6.1 0 9.1 0 34 0 68.1 0 102.1 0 16.8 0 33.7 0 50.5 0 5.1 0 10.3 0 15.4 0 1.3 0 2.6 0 3.9 0 1.3-.4 5.2.1 2.5-.3 1.5-.7 3-1.1 4.5-.5 1.6.2-.3.3-.5-.3.8-.7 1.6-1.2 2.3-.4.8-.9 1.5-1.3 2.2-.1.2-1.4 1.9-.4.6.9-1.1-1.8 1.8-2.3 2.3-1.8 1.9-.6.5.1.1-.7.5-1.4 1-2.2 1.4-.6.4-4.2 2-2.9 1.5 1.2-.5-2.4.6-3.2.8-.7.2-2.8.3 0 .1C256.2 896 255.3 896.1 254.4 896.1c-7.8.2-15.4 6.8-15 15 .4 8 6.6 15.2 15 15 27.2-.6 46.8-22.4 46.8-49 0-11.8 0-23.6 0-35.3 0-38.6 0-77.1 0-115.7 0-9.6.1-19.3 0-28.9-.4-26.3-21.2-47-47.6-47.2-29.5-.2-59 0-88.5 0-30.6 0-61.1-.1-91.7 0C47 650 25.5 670 25 696.8c-.1 8.6 0 17.3 0 25.9 0 38.3 0 76.6 0 114.8 0 12.7 0 25.4 0 38.2 0 5.9.3 11.9 2.1 17.5 5.1 16 19.1 29.3 35.9 32 9.7 1.6 19.7.9 29.5.9 17.7 0 35.4 0 53.2 0 34.2 0 68.4 0 102.6 0 2 0 4.1 0 6.1 0 7.8 0 15.4-6.9 15-15C269 903 262.8 896.1 254.4 896.1zM952.2 896.1c-24.6 0-49.3 0-73.9 0-33.5 0-67 0-100.5 0-2.7 0-5.3 0-8 0-1 0-1.9-.1-2.9-.1 2.9.2-.9-.3-1.9-.5-.4-.1-3.1-1-1.3-.3 1.7.6-1.7-.9-1.7-.9-.6-.4-3.9-2.6-2.8-1.7 1.3 1.1-.3-.3-.5-.5-.5-.6-1.2-1.3-1.8-1.8-.4-.4-1.7-2.2-.1.1-.4-.5-.8-1.1-1.1-1.6-.4-.7-.9-1.5-1.3-2.2-.4-.7-1.1-3.3-.3-.6-.5-1.5-.9-2.9-1.2-4.5-.4-1.7.1.4.1.7 0-.9-.1-1.8-.1-2.7 0-.2 0-.3 0-.5 0-1 0-2 0-3 0-4.7 0-9.4 0-14.1 0-36 0-72 0-108 0-15.2 0-30.3 0-45.5 0-3.5 0-7 0-10.4 0-.3 0-.6 0-.9 0-.6.2-3.8 0-2.3-.2 1.5.7-2.5.8-3.2.5-2.5.2-.9-.1-.1.3-.6.5-1.2.9-1.7.7-1.3 1.5-2.6 2.4-3.8-1.7 2.4 1.8-1.6 2.4-2.2 1.2-1.1-.3.2-.5.3.7-.5 1.4-1 2.2-1.4.7-.4 1.5-.8 2.3-1.2.2-.1 2.2-.9.6-.3-1.4.5 2.5-.6 3.2-.8 2.7-.8.7-.1 0-.1.9-.1 1.8-.1 2.7-.1.6 0 1.1 0 1.7 0 3.8 0 7.6 0 11.5 0 15.6 0 31.2 0 46.7 0 35.7 0 71.3 0 107 0 4.3 0 8.6 0 13 0 .9 0 1.7 0 2.6 0 .6 0 4.1.2 2.3 0-1.3-.1 2.4.7 3.2.8.5.1 2.8 1 .1-.1.8.3 1.6.7 2.3 1.2.7.4 4.5 3.3 2.3 1.3 1.1 1 2.2 2 3.2 3.1 1.1 1.2-.2-.3-.3-.5.5.7 1 1.4 1.4 2.2.6.9 2.1 5 1.3 2.3.5 1.5.9 3 1.2 4.5.5 2.2.1-2.3 0 0 0 .7.1 1.4.1 2.1 0 .2 0 .3 0 .5 0 3 0 6.1 0 9.1 0 34 0 68.1 0 102.1 0 16.8 0 33.7 0 50.5 0 5.1 0 10.3 0 15.4 0 1.3 0 2.6 0 3.9 0 1.3-.4 5.2.1 2.5-.3 1.5-.7 3-1.1 4.5-.5 1.6.2-.3.3-.5-.3.8-.7 1.6-1.2 2.3-.4.8-.9 1.5-1.3 2.2-.1.2-1.4 1.9-.4.6.9-1.1-1.8 1.8-2.3 2.3-1.8 1.9-.6.5.1.1-.7.5-1.4 1-2.2 1.4-.6.4-4.2 2-2.9 1.5 1.2-.5-2.4.6-3.2.8-.7.2-2.8.3 0 .1C954 896 953.1 896.1 952.2 896.1c-7.8.2-15.4 6.8-15 15 .4 8 6.6 15.2 15 15 27.2-.6 46.8-22.4 46.8-49 0-11.8 0-23.6 0-35.3 0-38.6 0-77.1 0-115.7 0-9.6.1-19.3 0-28.9-.4-26.3-21.2-47-47.6-47.2-29.5-.2-59 0-88.5 0-30.6 0-61.1-.1-91.7 0-26.4.1-47.9 20.1-48.4 46.8-.1 8.6 0 17.3 0 25.9 0 38.3 0 76.6 0 114.8 0 12.7 0 25.4 0 38.2 0 5.9.3 11.9 2.1 17.5 5.1 16 19.1 29.3 35.9 32 9.7 1.6 19.7.9 29.5.9 17.7 0 35.4 0 53.2 0 34.2 0 68.4 0 102.6 0 2 0 4.1 0 6.1 0 7.8 0 15.4-6.9 15-15C966.9 903 960.6 896.1 952.2 896.1z">
                            </path>
                            <path d="M527,664.9c0-34.4,0-68.8,0-103.3c0-54.9,0-109.8,0-164.7c0-12.6,0-25.3,0-37.9c0-7.8-6.9-15.4-15-15
                            c-8.1,0.4-15,6.6-15,15c0,34.4,0,68.8,0,103.3c0,54.9,0,109.8,0,164.7c0,12.6,0,25.3,0,37.9c0,7.8,6.9,15.4,15,15
                            C520.1,679.6,527,673.3,527,664.9L527,664.9z">
                            </path>
                            <path d="M178.1,664.9c0-44.5,0-89.1,0-133.6c0-6.4,0-12.8,0-19.2c-5,5-10,10-15,15c6.2,0,12.4,0,18.6,0
                            c17,0,33.9,0,50.9,0c25,0,50,0,74.9,0c30.6,0,61.2,0,91.9,0c33.4,0,66.8,0,100.2,0c33.7,0,67.4,0,101.1,0c31.6,0,63.2,0,94.7,0
                            c26.6,0,53.1,0,79.7,0c19.2,0,38.4,0,57.6,0c9,0,18.1,0.4,27.1,0c0.4,0,0.8,0,1.2,0c-5-5-10-10-15-15c0,44.5,0,89.1,0,133.6
                            c0,6.4,0,12.8,0,19.2c0,7.8,6.9,15.4,15,15c8.1-0.4,15-6.6,15-15c0-44.5,0-89.1,0-133.6c0-6.4,0-12.8,0-19.2c0-8.1-6.9-15-15-15
				c-6.2,0-12.4,0-18.6,0c-17,0-33.9,0-50.9,0c-25,0-50,0-74.9,0c-30.6,0-61.2,0-91.9,0c-33.4,0-66.8,0-100.2,0
				c-33.7,0-67.4,0-101.1,0c-31.6,0-63.2,0-94.7,0c-26.6,0-53.1,0-79.7,0c-19.2,0-38.4,0-57.6,0c-9,0-18.1-0.2-27.1,0
				c-0.4,0-0.8,0-1.2,0c-8.1,0-15,6.9-15,15c0,44.5,0,89.1,0,133.6c0,6.4,0,12.8,0,19.2c0,7.8,6.9,15.4,15,15
				C171.2,679.6,178.1,673.3,178.1,664.9L178.1,664.9z">
                            </path>
                        </svg>
                    </span>
                    <span class="ms-2">Delete subtasks</span>
                </div>
            </li>
        </ul>
    </div>
</template>


<script setup>
import { computed, defineProps } from 'vue'
import { PlusIcon, DocumentDuplicateIcon, CircleStackIcon, PencilSquareIcon, CalendarDaysIcon, InboxArrowDownIcon, TrashIcon } from '@heroicons/vue/24/outline'


const props = defineProps({
    index: Number,
    node: Object
})

const isNotProject = computed(() => props.index != 0)
const isNewProject = computed(() => {
    if (props.node.data.id) {
        return false
    }
    return true
})

</script>
